(function(n){n.extend(n.fn,{swapClass:function(n,t){var i=this.filter("."+n);return this.filter("."+t).removeClass(t).addClass(n),i.removeClass(n).addClass(t),this},replaceClass:function(n,t){return this.filter("."+n).removeClass(n).addClass(t).end()},hoverClass:function(t){return t=t||"hover",this.hover(function(){n(this).addClass(t)},function(){n(this).removeClass(t)})},heightToggle:function(n,t){n?this.animate({height:"toggle"},n,t):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"]();t&&t.apply(this,arguments)})},heightHide:function(n,t){n?this.animate({height:"hide"},n,t):(this.hide(),t&&this.each(t))},prepareBranches:function(n){return n.prerendered||(this.filter(".OESZ_FileTree li").addClass(n.CLASSES.li),this.filter(":last-child:not(ul)").removeClass(n.CLASSES.li).addClass(n.CLASSES.last),this.filter(":last-child:not(ul)").addClass(n.CLASSES.last),this.filter((n.collapsed?"":"."+n.CLASSES.closed)+":not(."+n.CLASSES.open+")").find(">ul").hide()),this.filter(":has(>ul)")},applyClasses:function(t,i){if(this.filter(":has(>ul):not(:has(>a))").find(">span").unbind("click.treeview").bind("click.treeview",function(t){this==t.target&&i.apply(n(this).next())}).add(n("a",this)).hoverClass(),!t.prerendered){this.filter(":has(>ul:hidden)").addClass("OESZ_expandable").replaceClass(t.CLASSES.last,t.CLASSES.lastExpandable).removeClass(t.CLASSES.li);this.not(":has(>ul:hidden)").addClass(t.CLASSES.collapsable).replaceClass(t.CLASSES.last,t.CLASSES.lastCollapsable).removeClass(t.CLASSES.li);var r=this.find("div."+t.CLASSES.hitarea);r.length||(r=this.prepend('<div class="'+t.CLASSES.hitarea+'"/>').find("div."+t.CLASSES.hitarea));r.removeClass().addClass(t.CLASSES.hitarea).each(function(){var t="";n.each(n(this).parent().attr("class").split(" "),function(){t+=this+"-hitarea "});n(this).addClass(t)})}this.find("div."+t.CLASSES.hitarea).click(i)},treeview:function(t){function s(i,r){function f(r){return function(){return u.apply(n("div."+t.CLASSES.hitarea,i).filter(function(){return r?n(this).parent("."+r).length:!0})),!1}}n("a:eq(0)",r).click(f(t.CLASSES.collapsable));n("a:eq(1)",r).click(f(t.CLASSES.expandable));n("a:eq(2)",r).click(f())}function u(){n(this).parent().find(">.OESZ_hitarea").swapClass(t.CLASSES.collapsableHitarea,t.CLASSES.expandableHitarea).swapClass(t.CLASSES.lastCollapsableHitarea,t.CLASSES.lastExpandableHitarea).end().swapClass(t.CLASSES.collapsable,"OESZ_expandable").swapClass(t.CLASSES.lastCollapsable,t.CLASSES.lastExpandable).find(">ul").heightToggle(t.animated,t.toggle);t.unique&&n(this).parent().siblings().find(">.OESZ_hitarea").replaceClass(t.CLASSES.collapsableHitarea,t.CLASSES.expandableHitarea).replaceClass(t.CLASSES.lastCollapsableHitarea,t.CLASSES.lastExpandableHitarea).end().replaceClass(t.CLASSES.collapsable,"OESZ_expandable").replaceClass(t.CLASSES.lastCollapsable,t.CLASSES.lastExpandable).find(">ul").heightHide(t.animated,t.toggle)}function h(){var r=[];i.each(function(t,i){r[t]=n(i).is(":has(>ul:visible)")?1:0});n.cookie(t.cookieId,r.join(""),t.cookieOptions)}function c(){var r=n.cookie(t.cookieId),u;r&&(u=r.split(""),i.each(function(t,i){n(i).find(">ul")[parseInt(u[t])?"show":"hide"]()}))}var e,i,f,r,o;t=n.extend({cookieId:"treeview"},t);t.toggle&&(e=t.toggle,t.toggle=function(){return e.apply(n(this).parent()[0],arguments)});this.data("toggler",u);this.addClass("treeview");i=this.find("li").prepareBranches(t);switch(t.persist){case"cookie":f=t.toggle;t.toggle=function(){h();f&&f.apply(this,arguments)};c();break;case"location":r=this.find("a").filter(function(){return this.href.toLowerCase()==location.href.toLowerCase()});r.length&&(o=r.addClass("selected").parents("ul, li").add(r.next()).show(),t.prerendered&&o.filter("li").swapClass(t.CLASSES.collapsable,"OESZ_expandable").swapClass(t.CLASSES.lastCollapsable,t.CLASSES.lastExpandable).find(">.OESZ_hitarea").swapClass(t.CLASSES.collapsableHitarea,t.CLASSES.expandableHitarea).swapClass(t.CLASSES.lastCollapsableHitarea,t.CLASSES.lastExpandableHitarea))}return i.applyClasses(t,u),t.control&&(s(this,t.control),n(t.control).show()),this}})})(jQuery)